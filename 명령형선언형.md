# 명령형? 선언형?

> 요즘 SwiftUI를 공부하거나 함수형 프로그래밍을 공부하면서 ‘선언형’이라는 단어를 자주 듣는다. 도대체 그것이 무엇인지 좀 더 명확히 두들겨보고 개인의 생각을 정리해본다.
> 

일단 팩트만..

Wiki

[명령형 프로그래밍](https://ko.wikipedia.org/wiki/명령형_프로그래밍)

- **프로그래머가 실행될 알고리즘을 명시해주는 것**
- 프로그래밍의 [상태](https://ko.wikipedia.org/w/index.php?title=%EC%83%81%ED%83%9C_(%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99)&action=edit&redlink=1)와 상태를 변경시키는 구문의 관점에서 연산을 설명하는 [프로그래밍 패러다임](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D_%ED%8C%A8%EB%9F%AC%EB%8B%A4%EC%9E%84)의 일종
- 목표는 명시하지 않는다.
- 명령형 프로그래밍 언어로 선언형으로 프로그램을 작성할 수도 있다. 라이브러리나 프레임워크 내부의 비선언형 부분을 [캡슐화](https://ko.wikipedia.org/wiki/%EC%BA%A1%EC%8A%90%ED%99%94)하여 이렇게 할 수 있다

[선언형 프로그래밍](https://ko.wikipedia.org/wiki/선언형_프로그래밍)

- 목표를 명시하고 알고리즘을 명시하지 않는다.
- 선언형 언어는 다른 언어와 같이 문법을 가지고 있고 언어의 단어들이 어떻게 결합되어야 하는지 설명하고 있으며, 어떻게 프로그램의 출력에 맞게 할 것인지를 언어의 문장으로 설명하는 의미구조가 있다.

### Imperative UI

- 각 단계를 명시적으로 지시. 세부적인 단계와 절차를 작성한다. ex) 생성, 배치, 상태 변경

```swift
let button = UIButton()
// 원하는 상태 = UI상태 = 유저에게 보여주고 싶은 상태
// 를 얻기 위한 원하는 얻기 위해 단계와 절차
// 레이아웃은 어떻고, 타이틀은 어떻게 바꾸고 ... 
button.frame = ...
button.setTitle(...
button.addTarget(...
// 이쯤 코드가 완성되면 button은 내가 위의 과정을 통해 유저에게 보여주고자 하는 UI를 보여주게된다.
// 여기서 중요한 것은 개발자인 내가 직접 특정 상태의 버튼을 얻기 위해 이것저것 설정했다는 것이다.
```

### Declarative UI

- 완전한 상태 기술. → 앱 개발자가 보여주고자하는 원하는 상태는 무엇인가 → 사용자에게 UI가 최종적으로 어떻게 보여져야 하는지 → View의 최종상태 기술 느낌 (과정이 아닌 최종 상태만 기술)
- *어떻게 보여줄지에 대한 명령 X. What을 기술. 무엇을 보여줄지 선언*
    - 항상 how보다 what이라는 것의 차이를 이런저런 글들에서 언급하는데, 와닿지 않는다.

```swift
var body: some View {
    // 버튼을 생성 하거나 업데이트 할 때 과정이 아니라 여러가지 원하는 상태를 '선언'한다.
    Button(title: ""..., action: { }, label: Text("...")
}
```

결론적으로 보면 위의 코드를 사람이 말로 했을 때 이것도 똑같이 타이틀을 뭐로하고, 액션을 뭐로하고 등을 설정하는 것에 있어서 차이가 없어보인다. 하지만 중요한 것은 과정을 기술 했는지 안했는지에 대한 것인거 같다.

- Imperative : frame을 설정하고, 타이틀을 설정하고, 액션을 설정하고 → 최종적으로 내가 원하는 버튼의 상태 획득
    - 버튼에 대한 프로퍼티 접근하나하나를 통해 직접 설정하고 이로 인해 버튼에 계속 접근해서 그 과정을 기술한다. button.title … button.frame…
- declarative: 획득하고 싶은 상태를 선언 → frame, 타이틀, 액션을 [….]로 설정해줘
    - 버튼 정의에 선언

**명령과 선언**

- 명령은 말그대로 명령을 하는것이다. 이거 해줘 저거해줘.. 수행할 동작이나 작업을 지정하는 것.
    - 최종꼴이 뭔지 기술되어있지 않고 과정을 통해 그 결과가 최종꼴이 된다.
- 선언은 정의하는 것에 가깝다. 이거해줘 저거해줘보단. **이 뷰는 이거야.라고 정의하고 선언하는 것**
    - 과정이 기술되어있지 않고 최종꼴이 기술 되어있다.
    

**코드**

- 명령형 : UI요소의 생성 배치 상태 변경 등을 코드로 직접 기술한다.
- 선언형 : 원하는 최종 결과물만 선언한다. → **`프레임워크가 개발자가 작성한 이 선언적 코드를 해석하고 UI를 생성하거나 업데이트한다.`**
- Imperative UI는 절차적인 접근 방식으로 UI를 구성하고 제어하는 반면, Declarative UI는 목표 UI를 기술하고 프레임워크가 내부적으로 상태 및 레이아웃 변경을 처리
- Imperative UI는 상태 변화에 대한 명령을 직접 작성해야 하지만, Declarative UI는 상태 변화에 대한 명세를 작성하고 프레임워크가 자동으로 처리 → SwiftUI

### 기반

내가 말하는 것에는 결국 선언형 UI라는 것은 프레임워크가 기반이 되어야한다. 

SwiftUI도 내부적으로는 명령형이겠지…

- 내부적으로 명령형 “그 코드를 프레임워크가 해석해서 나 대신 절차를 밟아서 원하는 결과값을 돌려준다.”
- 프레임워크가 안하고 내가 한다? 내가 절차를 밟고 과정을 기술하고 있으니 명령형.

**선언: 프레임워크가 개발자가 작성한 이 선언적 코드를 해석하고 UI를 생성하거나 업데이트한다.**

- 결국 코드를 작성할 때 선언적으로 작성을 할 수 있도록 프레임워크가 인터페이스를 제공해야한다는 얘기다. 프레임워크 내부는 절차적으로 구현되어있을 수도 있다. 중요한 것은 개발자가 코드를 작성할 때 선언만으로 작성을 한다는 것이고, 명령형에서 절차적으로 작성했던 부분들을 프레임워크가 자동으로 처리를 해준다는 것이다.
- 이는 중요한 의미를 갖는다. SwiftUI를 선언형 UI 프레임워크라고 말할 수 있는 것은 실제 구현이 선언형으로 되어있는지를 말하는 것이 아니라 UI의 작성을 선언형으로 코드 작성 할 수 있다는 것을 의미한다.

아래 코드를 보자. 아래코드는 UIKit을 썼으니깐 명령형 코드인가?

```swift
import UIKit 

// begin
button = CustomButton(state: State(title: "Hello", action: { print("world") }))
// end
```

- 이 코드만보고 단적으로 명령형이다, 선언형이다를 말할 순 없지만. CustomButton 내부에는 내가 작성하는 여러 절차들이 있을 것이다. 그것을 SwiftUI가 대신해준다고 치자. CustomButton을 동료개발자가 나한테 라이브러리로 만들어서 제공한다면 이것은 선언적으로 코드를 사용할 수 있다라고 표현할 수 있지 않을까?

근데 이런 정의보다는 결국 그래서 선언형 UI가 가져가는 장점이 더 중요한것아닐까

### **선언형 UI의 장점**

- 간결(절차생략), 가독성 Good
- 유지보수 굳
    - 비교적 구성과 동작을 명확히 코드가 표현하고 있음
- 상태중심 개발 가능
    - 개발자가 UI상태를 선언 → 프레임워크가 내부적으로 이 상태 변화에 따라 UI를 업데이트 → 일관성 유지
- 재사용성과 모듈: UI를 작은 구성요소로 나누고, 이를 조합하여 복잡한 UI 계층구조로 형성 가능. 이로 인해 모듈화된 구성요소는 재사용성이 올라간다. 한곳에서의 변경을 다른곳에 쉽게 반영하기 쉽고, 코드중복이 적어진다.
    - SwiftUI로 코드를 작성하다보면 뷰를 작게 계속 커스텀 서브뷰로 작게 나누게 된다. (애플또한)
- SwiftUI → 레이아웃: 레이아웃에 대한 선언이내장되어있다.이로 인해 어떻게 보여줄지 작성을 하는 것이 아니다. (오토레이아웃 코드를 작성하지 않는다.) → 프레임워크가 Spacer. (”공간이 있어야되”)라고 what을 선언하면 자동으로 레이아웃 처리를 해준다.
    - 이로 인해 UI구조와 동작에 집중된 코드를 작성할 수 있다. (오토레이아웃 코드가 확실히 더 복잡하죠)

### 단점

- 학습곡선 : 우리는 오토레이아웃에 익숙하다. 스유의 상태값을 다루는게 어색하다. 등
- 제한된 커스터마이징: Declarative UI 프레임워크는 추상화 수준이 높기 때문에 더 세밀한 커스터마이징이 필요한 경우에는 제한적일 수 있습니다. 특정한 UI 요구사항을 충족시키기 위해서는 프레임워크의 기능을 벗어나 별도의 작업이 필요할 수도 있습니다.
(SwiftUI 커스텀하는거 가지고 난리치는 이유인듯하다.)
    - 반대로 Imperative는 세밀한 커스터마이징이 장점이다.
- 성능 이슈: 일부 Declarative UI 프레임워크는 UI 업데이트를 위해 가상 돔(Virtual DOM)이나 리렌더링 메커니즘을 사용합니다. 이는 일부 상황에서 성능 이슈를 초래할 수 있을 수 있으며, 특히 복잡한 UI 구조나 대규모 데이터 처리에는 더 큰 영향을 줄 수 있습니다. → 물론 스유도 리렌더링 과정을 거치지만 변경이 필요한 부분만 효율적으로 다시 그린다고 애플이 그러더라

스유를 스유스럽게… ~_ ~
